var e=Object.defineProperty,t=("undefined"!=typeof require&&require,(t,o,s)=>(((t,o,s)=>{o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s})(t,"symbol"!=typeof o?o+"":o,s),s));import{p as o,a as s,o as a,c as A,F as l,r,b as n,d as i,u,e as c,f as g,g as d,h as p,i as h,t as f,j as v,k as m,l as y,m as w,n as b,q as x,s as B,v as U,w as I,x as C,y as k,z as Q,A as E,B as R,C as V,D as N,E as F,G as S}from"./vendor.3b406d65.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class O{constructor(e,o){t(this,"moves",[[-1,0],[1,0],[0,-1],[0,1]]),t(this,"height",10),t(this,"width",10),t(this,"total_boxes",4),t(this,"room",null),t(this,"topology",null),t(this,"player_location",null),t(this,"boxes_on_target",0),t(this,"steps",0),t(this,"max_steps",128),t(this,"reward_per_step",-.01),t(this,"reward_box_on_target",1),t(this,"reward_box_off_target",-1),t(this,"reward_finished",10),this.room=e,this.topology=o;for(const[t,s]of e.entries())for(const[e,o]of s.entries())5==o&&(this.player_location=[t,e])}step(e){this.steps+=1;let t=this.reward_per_step;t+=e<=3?this.push(e):this.move(e);let o=this.boxes_on_target==this.total_boxes,s=this.steps>=this.max_steps,a=o||s;1==o&&(t+=this.reward_finished);let A={finished:o,max_steps:s};return{step:this.steps,reward:t,done:a,info:A}}push(e){let t=this.moves[e%4],o=JSON.parse(JSON.stringify(this.player_location)),s=[o[0]+t[0],o[1]+t[1]],a=[s[0]+t[0],s[1]+t[1]];if(a[0]>=this.height||a[1]>=this.width)return 0;let A=this.room[s[0]][s[1]],l=this.room[a[0]][a[1]];if(![3,4].includes(A)||![1,2].includes(l))return this.move(e);let r=0;return this.player_location=s,this.room[s[0]][s[1]]=4==A?6:5,this.room[o[0]][o[1]]=this.topology[o[0]][o[1]],4==A&&(this.boxes_on_target-=1,r+=this.reward_box_off_target),2==l?(this.room[a[0]][a[1]]=4,this.boxes_on_target+=1,r+=this.reward_box_on_target):this.room[a[0]][a[1]]=3,r}move(e){let t=this.moves[e%4],o=JSON.parse(JSON.stringify(this.player_location)),s=[o[0]+t[0],o[1]+t[1]],a=this.room[s[0]][s[1]];return[1,2].includes(a)?(this.player_location=s,this.room[s[0]][s[1]]=2==a?6:5,this.room[o[0]][o[1]]=this.topology[o[0]][o[1]],0):0}}var D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAk6AAAJOgHwZJJKAAAAB3RJTUUH4gMNDQUyn+qEsgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAwSURBVCjPY9xgy4ACYvsYFhcxMOAUZGIgEdBeA+OGWX20tsEWb/hgiI/0UBqyaQkAduESk187q7oAAAAASUVORK5CYII=",J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAk6AAAJOgHwZJJKAAAAB3RJTUUH4gMNDDAGHa3YhgAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAAQSURBVCjPY2AYBaNgFMAAAAMQAAFokW3DAAAAAElFTkSuQmCC",K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAk6AAAJOgHwZJJKAAAAB3RJTUUH4gMNESUmBYgueQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABaSURBVCjPY2AgETAyMDC8FxMjUrXgq1cMxGuAKGMi1UlU0vCOJA3vGBhYpKTeEakBopoBtx50DUIMDH+ePWNgYPjz7JkQkU4Swq0ap6eFaB6s1NTAgpxOaAIA6AIUbTZBm00AAAAASUVORK5CYII=",G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAk6AAAJOgHwZJJKAAAAB3RJTUUH4gMNDQMNf9YOCQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAACWSURBVCjPlZIxFsMgDEN//Lr5dt2Zu/dK7L5OTuK9Q0KowTSvmiUhZG37iw7lFxzgEajPBdUax5F748PIT40E77p+QU+OhCSaaSyklfDuobElOwq+s1rOngRAAQeHCp70JvyJTKCgUKb/5II5t80Ca0cY2EMHAGz7u+/kuk5ADVOQTtXFlkqz49qS31Wj81o972TYNvABWx0lqru0tOQAAAAASUVORK5CYII=",Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAk6AAAJOgHwZJJKAAAAB3RJTUUH4gMOABET50B/BAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAACPSURBVCjPtZKxEcMgDEUfPncMwDKZgt5LMIj71PSaIsvQpKNPYSeGSBQUVsMd99996UvuzVwtk3rW4ykJgDgWZsKzdYjnr10C3mzJW4x05g0Qv4wM1cohQm10YgymUtqgEnbCA6oRw3SsFuApifJS89iA7ltGQFbqvww6IPfh9hm0zHKtzA9O48cA4G6/1g94vB6r3jGf9wAAAABJRU5ErkJggg==",M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAk6AAAJOgHwZJJKAAAAB3RJTUUH4gMOABIv4wJQQAAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAABOSURBVCjPY2CAAc1TUgw4ALIUEy4JXIKMBDUwMDBcN3uG3QbSgOYpKbgNuNgIG/D4GE0BIzGqkT3DSLxqMj09CDUwEhmsaPFNQlqivR8AHgYY2tSSx4cAAAAASUVORK5CYII=",H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAk6AAAJOgHwZJJKAAAAB3RJTUUH4gMOABMlGsyIHwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAAAB+SURBVCjP1VKxDcAgDDOICzr2Ax7Iwv0sfYAPGLmhQ0gURQLRsRZDnDiAIYAgPzcWsKUIYABDCkOoLlarJjC5toc06iqL+IjoLtqo83429h72jp0gnKitmXCu9h7+2zB/uhxYr9R5IOaQrN5XkyxLlhTTrHDJBJk8ANnEWCRfwa0uaP+oK+kAAAAASUVORK5CYII=";o("data-v-baac2678");const j={class:"screen"},T=["src"];s();const _={props:{room:Array},setup(e){function t(e){return{0:D,1:J,2:K,3:G,4:Y,5:M,6:H}[e]}return(o,s)=>(a(),A("div",j,[(a(!0),A(l,null,r(e.room,((e,o)=>(a(),A(l,null,[(a(!0),A(l,null,r(e,((e,s)=>(a(),A("img",{key:o+"-"+s,src:t(e)},null,8,T)))),128))],64)))),256))]))},__scopeId:"data-v-baac2678"},W={class:"flex justify-between text-gray-800 text-lg font-light mt-4"},q={class:"text-right"},P=y("Solved: "),L={key:0,class:"relative inline-block px-3 py-1 font-semibold text-green-900 leading-tight"},X=[p("span",{"aria-hidden":"true",class:"absolute inset-0 bg-green-200 opacity-50 rounded-full"},null,-1),p("span",{class:"relative m-3"}," ✓ ",-1)],z={key:1,class:"relative inline-block px-3 py-1 font-semibold text-red-900 leading-tight"},Z=[p("span",{"aria-hidden":"true",class:"absolute inset-0 bg-red-200 opacity-50 rounded-full"},null,-1),p("span",{class:"relative m-3"}," ☓ ",-1)],$={class:"text-left"},ee=y("Steps: "),te={class:"w-4 inline-block"},oe={props:{room:Array,topology:Array,control:{type:Boolean,default:!0}},setup(e,{expose:t}){const o=e,s=n(null),l=n(null),r=n(0),y=n(0),x=n(!1),B=i(JSON.parse(JSON.stringify(o.room)));let U=new O(B,o.topology);const{width:I,height:C}=u(),k=c(s);async function Q(e){if(!k.value)return;r.value+=1;let t=U.step(e);if(0==t.info.finished&&(x.value=!1),1==t.done&&1==t.info.finished){x.value=!0;for(let e=0;e<3;e++)o(),await new Promise((e=>setTimeout(e,350)))}function o(){const{left:e,top:t,width:o,height:s}=l.value.$el.getBoundingClientRect();b({particleCount:250,spread:80,ticks:100,gravity:1.5,origin:{x:(e+o/2)/I.value,y:(t+s/12*7)/C.value}})}}return 1==o.control&&(g("ArrowUp",(e=>{e.preventDefault(),y.value+=1,Q(0)})),g("ArrowDown",(e=>{e.preventDefault(),y.value+=1,Q(1)})),g("ArrowLeft",(e=>{e.preventDefault(),y.value+=1,Q(2)})),g("ArrowRight",(e=>{e.preventDefault(),y.value+=1,Q(3)})),d(y,(async function(){let e=y.value;if(e<=0)return;try{y.value=0;const t=new FormData;t.append("steps",e),await w.patch("/api/steps",t)}catch(t){console.error(t)}}),{debounce:2e3})),t({stepTrajectory:async function(e){for(let t of e)await new Promise((e=>setTimeout(e,450))),Q(t)},reset:function(){for(let e=0;e<=9;e++)for(let t=0;t<=9;t++)B[e][t]=o.room[e][t];U=new O(B,o.topology),r.value=0,x.value=!1}}),(e,t)=>(a(),A("div",{ref:(e,t)=>{t.boxoban=e,s.value=e}},[p("div",W,[p("div",q,[P,x.value?(a(),A("span",L,X)):h("",!0),x.value?h("",!0):(a(),A("span",z,Z))]),p("div",$,[ee,p("span",te,f(r.value),1)])]),v(_,{room:m(B),ref:(e,t)=>{t.screen=e,l.value=e},class:"mx-auto mt-12"},null,8,["room"])],512))}};o("data-v-1397305e");const se={class:"bg-indigo-900 relative overflow-hidden h-screen"},ae=["src"],Ae=p("div",{class:"inset-0 bg-black opacity-25 absolute"},null,-1),le=p("h1",{class:"font-sans font-semibold text-5xl text-center text-white leading-tight mt-4"},[y(" Solving Sokoban puzzle using "),p("br"),y(" multiple reinforcement learning methods ")],-1),re={class:"text-2xl text-gray-900 font-normal"},ne=y(" Total number of steps performed by players to defeat the AI "),ie={class:"text-center mt-7 font-semibold text-3xl"},ue={class:"text-2xl text-gray-900 font-medium"},ce={class:"flex items-stretch"},ge={class:"w-1/2 flex justify-center items-top"},de={class:"w-full p-4"},pe={class:"card flex flex-col justify-start h-full p-10 bg-white rounded-lg shadow-md hover:shadow-2xl transition-shadow duration-500"},he=p("div",{class:"prod-title"},[p("p",{class:"text-2xl uppercase text-gray-900 font-bold"}," Human "),p("p",{class:"text-sm text-gray-400 mt-2"},[y(" The goal is to push all the yellow boxes on top of the red targets. "),p("br"),y(" Use the arrow keys to move the agent. "),p("br"),y(" Try to pass the level with as few steps as possible to "),p("span",{class:"uppercase text-gray-800 text-base font-semibold"},"beat the AI!")])],-1),fe={class:"w-1/2 flex justify-center items-top"},ve={class:"w-full p-4"},me={class:"card flex flex-col justify-start p-10 bg-white rounded-lg shadow-md hover:shadow-2xl transition-shadow duration-500"},ye=p("div",{class:"prod-title"},[p("p",{class:"text-2xl uppercase text-gray-900 font-bold"}," AI "),p("p",{class:"text-sm text-gray-400 mt-2"},[y(" AI is the best performing GAIL ResNet model among the reinforcement learning algorithms experimented in the dissertation."),p("br"),y(" Click the solve button to let AI solve the level. ")])],-1),we={class:"animate-spin -ml-1 mr-2 h-5 w-5 inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},be=[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)],xe=y(" Solve "),Be={key:0},Ue={key:1},Ie=p("footer",{class:"bg-white mt-28 w-full py-4 border-gray-200"},[p("div",{class:"max-w-screen-xl mx-auto px-4"},[p("span",{class:"text-center text-gray-400 pt-10 sm:pt-2 font-light flex items-center justify-center"},[y(" Copyright © 2021 "),p("a",{href:"https://github.com/binaryoung",target:"_blank",class:"text-center text-gray-400 hover:text-gray-800 transition-colors duration-150 font-light"},"Young")])])],-1);s();const Ce={setup(e){const t=n(0),o=n(null),s=n(null),r=n(null),i=n(null),u=n(0),g=n(!1),d=n(!1),y=n(!1),{isLoading:b}=x(),S=c(o);let O=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,2,1,0],[0,0,1,2,1,1,1,3,2,0],[0,0,1,1,1,1,2,3,1,0],[0,0,0,0,0,1,1,1,1,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,3,0,0,0],[0,0,0,0,0,3,1,0,0,0],[0,0,0,0,0,5,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],j=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,2,1,0],[0,0,1,2,1,1,1,1,2,0],[0,0,1,1,1,1,2,1,1,0],[0,0,0,0,0,1,1,1,1,0],[0,0,0,0,1,1,1,0,0,0],[0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,1,1,0,0,0],[0,0,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];async function T(){try{const{data:{steps:e}}=await w.get("/api/steps");t.value=e}catch(e){console.error(e)}}B((()=>{for(let e of[D,J,K,G,Y,M,H]){(new Image).src=e}}));const _=U(t,{duration:1e3}),W=I((()=>_.value.toFixed(0)));function q(){s.value.scrollIntoView({behavior:"smooth"})}function P(){z((u.value+1)%1e3)}function L(){z(Math.floor(999*Math.random()))}function X(){let e=prompt("Enter a level id between 0 and 999");e=parseInt(e),null===e||isNaN(e)||(e<0||e>999?alert("Level id must be between 0 and 999"):z(e))}async function z(e){try{b.value=!0;const{data:t}=await w.get(`/api/levels/${e}`);u.value=t.id;for(let e=0;e<=9;e++)for(let o=0;o<=9;o++)O[e][o]=t.room[e][o],j[e][o]=t.topology[e][o];Z()}catch(t){console.error(t),alert("An error occurred, please try again")}finally{b.value=!1}}function Z(){r.value.reset(),i.value.reset()}async function $(){try{b.value=!0,y.value=!0;const{data:e}=await w.get(`/api/levels/${u.value}/solve`);g.value=e.solved,d.value=!0,setTimeout((()=>d.value=!1),5e3),e.solved&&i.value.stepTrajectory(e.trajectory)}catch(e){console.error(e),429==e.response.status?alert("Too many requests, please try again later"):alert("An error occurred, please try again")}finally{b.value=!1,y.value=!1}}return C((()=>{S.value&&T()}),3e3),k(S,((e,t)=>{1==e&&T()})),T(),(e,t)=>(a(),A(l,null,[p("div",se,[p("img",{src:m("/assets/sokoban.1aa283d1.png"),class:"absolute h-full w-full object-cover"},null,8,ae),Ae,p("div",{class:"container mx-auto px-6 md:px-12 relative z-10 flex items-center py-24 xl:py-40"},[p("div",{class:"w-full flex flex-col items-center relative z-10"},[le,p("a",{onClick:q,class:"block cursor-pointer bg-gray-800 hover:bg-gray-900 py-3 px-4 text-lg text-white font-bold uppercase mt-14"}," Try Now ")])]),v(m(E),{event:"scroll",class:"absolute box bottom-20"},{default:Q((()=>[v(m(F),{tag:"img",src:m("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACABAMAAAAxEHz4AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABhQTFRFbkUubUQui1c6sW1JuXpXgVE2nGFBpWdFplPgvwAAA3dJREFUeJzNmT1ynEAQRnUFFlsb7ypQzOIqYpd0AQU6gB0oXyng+p5/Zuivp5sZBe5Eta7y4zHwMQ398NBbQ2f9H4Cn18a6BcDpV9v/f7nEU2hUuPlTOLUqOAEDGC+NCkbgNBnAj1ubghV4+m0BL20K7rgO8Nqk4A/rAU0K/qge0KIQDhoADQrhmAFwXCEeMgIOK8QjRoD7h/lAxQMmgFW4Hqh4ygngg3Gk/BlvAJ8MfYU13wBHFcKSZwCj8G7LwP1Z+pO9nK7ZT6P5YStddAB4C6sJAcPwKAKMwnk1Nayu7mf/1/28B4E6wChwgChQBxiF0dwqg79jptH/tT+nKCAAjAIGJAEB4BUoYBOQAE6BAjYBCeAUCCATEAFWgQAyARFgFfaAXEAGGIU9IBeQAe8I8HEE8EYBmcAfGRBuxwSYSgEFICoEwE5AAYgKHrAXYAA/gYIH7AUYAFJwALICHAAoOMBe4MoBgIIFEIFnFkAVLIAIrAwArYIBUIEvBnAFCgZABWYG8AkUphEIcIAVKEwjEOAAC1AYBiDAAWakgARYAFagAiwAKgABHoAU8ifZMDgBHgAVihiucx1QVbAx/BIANQUXw1kCLJ80lI9J4FkGzCsIZRZDGbCAUD5uMZQBMwrlFkMNAF+IEEMNAF6IGEMNAN4LMYYaABNKH0MVAIYyxFAFgAohhjoAUggx1AGgwnwEsNzhNqUH2I4GKmgBZi/Am7UWYO4cvApKgN2M/kIFJcClByroAH43hAo6QHiCIAUVIG7HSEEFSE9RFEodIDzHgYIOkHYSLhFVQN6Q4HtBABS7Ke4dqwDSFeNQ8gDSFeNQsgDSkjGhZAGkIcGrwAJoT4gfTSyAdkT3EwwlAwBN6QRXgQOAlmw6w1BiAOqKpxF10Oz7Au0Jp3FBoeQARMC2+3CnxADQlBoAUmAAVMC98gAFDEBdsQUABQwoY+i3Y/faRxUkwNYVOwBREAFbV+xfffcKEiDrij1gryABsq44vP7vOmgBkHfFAbCUjyYBkHfF6RNIsQp1QNEVJ0CxCnVA0RUnQHEhqoCyK06A4kJUAWVXvH0KyxXYOKsLAHo/C3d/mL7F78mqupBP424+MKsrzSOK8UBYF02lecS3DSh6RyTdQ5reMVH3oKp3VNY9rOsdF3YPLLtHpkPv0PYbxsbdg+uu6gb8A7+e/lbio/YNAAAAAElFTkSuQmCC"),strength:400,type:"translate",axis:"x"},null,8,["src"])])),_:1})]),p("div",{class:"flex justify-around mt-20 mb-12",ref:(e,t)=>{t.stepCounter=e,o.value=e}},[p("div",re,[ne,p("div",ie,f(m(W)),1)])],512),p("div",{class:"flex justify-around mt-20 mb-10",ref:(e,t)=>{t.controlBar=e,s.value=e}},[p("p",ue," Level id: "+f(u.value),1),p("div",{class:"flex justify-between"},[p("button",{onClick:P,class:"mr-8 px-6 py-2 transition ease-in duration-200 uppercase rounded-full hover:bg-gray-800 hover:text-white border-2 border-gray-900 focus:outline-none"}," Next level "),p("button",{onClick:L,class:"mr-8 px-6 py-2 transition ease-in duration-200 uppercase rounded-full hover:bg-gray-800 hover:text-white border-2 border-gray-900 focus:outline-none"}," Random level "),p("button",{onClick:X,class:"mr-8 px-6 py-2 transition ease-in duration-200 uppercase rounded-full hover:bg-gray-800 hover:text-white border-2 border-gray-900 focus:outline-none"}," Fetch a level by id "),p("button",{onClick:Z,class:"mr-8 px-6 py-2 transition ease-in duration-200 uppercase rounded-full hover:bg-gray-800 hover:text-white border-2 border-gray-900 focus:outline-none"}," Reset level ")])],512),p("div",ce,[p("div",ge,[p("div",de,[p("div",pe,[he,p("div",null,[v(oe,{room:m(O),topology:m(j),control:!0,ref:(e,t)=>{t.human=e,r.value=e},class:"my-10"},null,8,["room","topology"])])])])]),p("div",fe,[p("div",ve,[p("div",me,[ye,p("div",null,[v(oe,{room:m(O),topology:m(j),control:!1,ref:(e,t)=>{t.ai=e,i.value=e},class:"my-10"},null,8,["room","topology"]),p("button",{onClick:$,class:"m-auto block px-12 py-2 transition ease-in duration-200 uppercase rounded-full hover:bg-gray-800 hover:text-white border-2 border-gray-900 focus:outline-none"},[R((a(),A("svg",we,be,512)),[[V,y.value]]),xe]),p("div",{class:N([{"opacity-100":d.value,"opacity-0":!d.value},"text-base text-gray-700 mt-6 text-center transition-all duration-1000 ease-in-out"])},[g.value?(a(),A("div",Be,"AI successfully solves this level, watch out for the Skynet!")):h("",!0),g.value?h("",!0):(a(),A("div",Ue,"AI can't solve this level, it can't rule the world yet!"))],2)])])])])]),Ie],64))},__scopeId:"data-v-1397305e"};S(Ce).mount("#app");
